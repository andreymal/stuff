= Описание создания интерфейса (GUI) для noname Client 0.0.1 alpha =

Если кому взбредёт в голову придулать к клиенту нормальный интерфейс, то вот введение.
Интерфейс по умолчанию занимает 2 класса - gui и GuiListener. gui - основа, а через GuiListener ядру передаются команды и устанавливается дисплей.

== Файл gui ==

Первая обязательная функция - boolean isGui(). Её активирует ядро при создании интерфейса. Если интерфейс есть, возвращается true.
процедура start() - для активирования интерфейса.
процедура minimize() активируется при сворачивании интерфейса и открытии консоли.
процедура restore(), наоборот, активируется при возвращении интерфейса.
процедура stop() останавливает интерфейс.
две процедуры msg() - одна с 8 параметрами (и именем команды), другая с одним. Используется для передачи команд и параметров интерфейсу. Вот их надо описать подробнее.

 onConnFailed - нету интернету, ошибка соедиенения. Без параметров.
 connected - подключено.
 onAuthFailed - ошибка авторизации. Первый параметр - код ошибки.
 onIqFailed - пришёл iq с типом error. параметры type,id,code - тип ошибки, id и код ошибки.
 message - сообщение. Параметры: from - от кого, resource - ресурс, type - тип сообщения, subject - тема, body - само сообщение.
 onContactRemoveEvent - вероятно, удалён контакт. первый параметр - jid удалённого.
 onContactEvent - новый контакт в ростере. Приходит, например, при загрузке ростера. Парамерты: jid, name - ник, group - группа, subscription - подписка.
 onOfflineEvent - контакт отключился. Параметры: jid, status - текст статуса.
 onStatusEvent - контакт подключился. Параметры: jid, show (online-chat-away-xa-dnd) , status - текст статуса.
 subscribe - запрос подписки. Параметр: jid
 unsubscribe - отобрали подписку. Параметр: jid
 onAddBook - закладка. Параметры: autojoin - автовход (0 или 1), name - название, jid, nick - ник.
 onDiscoItem - ответ на диско. Параметры: from - чьё диско, itemjid - пункт диско, itemname - имя пункта, id
 onDiscoFeature - тоже ответ на диско, но на другое. Параметры: from - чьё диско, feature - фича, id, 0 или 1 - поддерживает ли ядро эту фичу.
 onRegister - без параметров, успешная регистрация.
 onRegisterFailed - ошибка регистрации. Один параметр - код ошибки.
 onRemoved - учётная запись удалена. Соединения больше нет.
 onRemoveFailed - ошибка удаления учётки. Без параметров.

Процедура sendCommand с 8 и 1 параметрами используется для отправки команды ядру. Всё то же самое, как описаны команды в help.
Процедура setDisplay отправляет ядру объект, который нужно поставить на дисплей.

Вроде всё. Вопросы и пожелания пишите на andreymal@jabberon.ru
Удачи! :)
(с) andreymal 2010 :)
